import{b as I,r as l,_ as v,j as e,B as j,I as P,c as R,a as A,d as F,e as T}from"./index-CbzCPSk_.js";import{I as M,d as S,T as B}from"./word-container-BsCd0c96.js";import{a as W,F as U}from"./index-r-UIVQBg.js";import{C as V,W as G}from"./word-display-CeNCp01E.js";const H=10;function J(n){const o=I(),[u,p]=l.useState(!1),[c,f]=l.useState([]),[x,d]=l.useState([]),[a,w]=l.useState(null),[b,r]=l.useState(!1),[s,i]=l.useState([]),[g,L]=l.useState({}),[k,E]=l.useState({}),C=async()=>{const t=[...c],m=[...x,...Object.keys(n.learnedCharacters)],h=n.wordsList.filter(y=>!m.includes(y));for(;t.length<H&&h.length>0;){const y=h[Math.floor(Math.random()*h.length)];t.includes(y)||t.push(y)}localStorage.setItem("learningProgress["+n.category+"]",JSON.stringify(t)),f(t)},N=()=>{if(c.length>1){let t=null;for(;t==null||t==a;)t=c[Math.floor(Math.random()*c.length)];w(t),r(!1)}},_=()=>{if(s.length>0){const t=[...s];let m=!1;for(;!m&&t.length>0;){let h=t[t.length-1];t.pop(),c.includes(h)&&(i(t),w(h),r(!1),m=!0)}}},O=()=>{f(c.filter(t=>t!==a)),d([...x,a]),o(R({word:a}))};l.useEffect(()=>{switch(p(!1),n.category){case"HSK 3.0/Level 1":v(()=>import("./dictionary_hsk1-Cxe3KjgF.js"),[]).then(t=>{L(t.hsk1Dictionary),v(()=>import("./primitives_hsk1-BpeMAGKP.js"),[]).then(m=>{E(m.hsk1Primitives),p(!0)})})}},[n.category]),l.useEffect(()=>{if(u){const t=JSON.parse(localStorage.getItem("learningProgress["+n.category+"]")||"{}");Object.keys(t).length>0?f(t):C()}},[u]),l.useEffect(()=>{N()},[c]);const D=l.useMemo(()=>a&&a in g?e.jsx(V,{currentCharacter:a,dictionary:g,primitives:k}):null,[a]);return l.useEffect(()=>{C()},[x]),e.jsx("div",{className:"w-full h-full flex flex-col overflow-auto",children:u?c.length>0&&a?e.jsxs(e.Fragment,{children:[e.jsx(G,{word:a}),e.jsx("div",{className:"w-full bg-neutral-700 p-3 rounded-md grow mb-3 mt-3",children:b&&a in g?D:e.jsx("div",{className:"w-full h-full flex",onClick:()=>{r(!0)},children:e.jsx("p",{className:"m-auto font-medium text-xl",children:"CLICK TO REVEAL"})})}),e.jsxs("div",{className:"w-full flex flex-row gap-2 bg-neutral-800 sticky bottom-0 py-3",children:[e.jsx(j,{className:"w-auto",basic:!0,disabled:s.length==0,onClick:_,children:e.jsx(M,{className:"text-xl"})}),e.jsxs(j,{className:"w-full",basic:!0,onClick:O,children:[e.jsx(W,{className:"mr-2 text-xl"})," LEARNED"]}),e.jsxs(j,{className:"w-full",onClick:()=>{i([...s,a]),N()},children:["NEXT ",e.jsx(P,{className:"ml-2 text-xl"})]})]})]}):e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:"LOADING..."})})}function q(){const n=A(F),[o,u]=l.useState(null),[p,c]=l.useState(!1),[f,x]=l.useState(null),[d,a]=l.useState({});l.useEffect(()=>{const r={};Object.keys(S).forEach(s=>{const i=S[s].category;i in r?r[i].push(s):r[i]=[s]}),a(r)},[]);const w=l.useMemo(()=>{const r=[];return Object.keys(d).map(s=>{let i=0;d[s].forEach(g=>{Object.keys(n).includes(g)&&(i+=1)}),r.push(e.jsxs("button",{className:"p-3 rounded-md text-left shadow-md active:brightness-80 hover:cursor-pointer "+(s==o?"bg-neutral-500":"bg-neutral-700"),onClick:()=>{o==s?u(null):u(s),c(i==d[s].length)},children:[e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--primary)"},children:s}),e.jsxs("p",{children:["Characters:"," ",e.jsx("span",{style:{color:"var(--primary)"},children:i})," /"," ",d[s].length]})]},s))}),r},[o,d,n]),b=l.useMemo(()=>{const r=[];return o&&(d[o]||[]).map(s=>{r.push(e.jsxs("div",{className:"bg-neutral-600 p-2 rounded-md flex justify-center gap-2 "+(Object.keys(n).includes(s)?"bg-neutral-500":"opacity-50"),children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--primary)"},children:s}),e.jsxs("p",{className:"text-xl font-bold my-auto",children:["[",B(s),"]"]})]},"list_"+s))}),r},[o]);return e.jsx("div",{className:"container mx-auto h-full flex flex-col md:flex-row gap-2",children:f==null?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-auto w-full md:w-1/2 flex-col gap-2 h-full overflow-auto px-2 pb-2 "+(o?"hidden md:flex":"flex"),children:[e.jsx("p",{className:"text-3xl text-center font-bold bg-neutral-800 md:sticky md:top-0",children:"CATEGORIES"}),w]}),o?e.jsxs("div",{className:"mx-auto w-full md:w-1/2 flex flex-col gap-2 h-full overflow-auto px-2",children:[e.jsx("p",{className:"text-3xl text-center font-bold bg-neutral-800 md:sticky md:top-0 z-10",children:"WORDS"}),b,e.jsxs("div",{className:"flex flex-row gap-2 sticky bottom-0 bg-neutral-800 py-2",children:[e.jsxs(j,{className:"grow-1 md:hidden",basic:!0,onClick:()=>{u(null)},children:[e.jsx(T,{className:"font-bold mr-2"}),"BACK"]}),e.jsxs(j,{className:"grow-1",onClick:()=>{x(o)},disabled:p,children:[e.jsx(U,{className:"font-bold mr-2"}),"STUDY"]})]})]}):null]}):e.jsx(J,{category:f,learnedCharacters:n,wordsList:d[f]})})}export{q as default};
