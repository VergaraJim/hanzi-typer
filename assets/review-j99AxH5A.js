import{G as k,j as e,b as O,a as E,f as V,d as z,r as a,u as G,h as W,B as j,_ as L,i as B}from"./index-kgVlMKql.js";import{d as g}from"./functions-B78AmXaJ.js";import{T as Z,a as K}from"./word-container-DRvnEvpg.js";import{b as U}from"./index-0m9lOb7r.js";import{C as Y,d as X,W as q}from"./definitions_mini-DCvkpJu_.js";function J(s){return k({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,104v96a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V104A16,16,0,0,1,48,88H208A16,16,0,0,1,224,104ZM56,72H200a8,8,0,0,0,0-16H56a8,8,0,0,0,0,16ZM72,40H184a8,8,0,0,0,0-16H72a8,8,0,0,0,0,16Z"},child:[]}]})(s)}function Q(s){return k({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"},child:[]}]})(s)}function $(s){let l={};return e.jsx("input",{...s,type:"text",style:l,onChange:s.onChange,className:"h-12 min-w-12 bg-neutral-800 rounded-lg text-white font-medium px-3 focus:outline-neutral-400 focus:outline-2 inset-shadow-md "+(s.className||""),value:s.value})}async function ee(s,l=0){const o=[];let u=l;return Object.keys(s).sort(function(i,m){return new Date(s[i].reviewDate).getTime()-new Date(s[m].reviewDate).getTime()}).forEach(i=>{const m=s[i];if(new Date().getTime()>new Date(m.reviewDate).getTime()||u>0){u>0&&(u-=1);const n=[];let h="";Object.keys(g).forEach(c=>{c==i?h=g[c].definition:c.includes(i)&&n.push({word:c,definition:g[c].definition,level:g[c].category})}),o.push({word:i,definition:h,related:n})}}),o}function R(s){let l=[...s],o=l.length;for(;o!=0;){let u=Math.floor(Math.random()*o);o--,[l[o],l[u]]=[l[u],l[o]]}return l}function ae(){const s=O(),l=E(V),o=E(z),[u,p]=a.useState(!0),[i,m]=a.useState([]),[n,h]=a.useState([]),[c,D]=a.useState([]),[t,y]=a.useState(null),S=G(),[x,N]=a.useState(!1),[C,w]=a.useState(""),[H,I]=a.useState({}),[T,_]=a.useState({}),b=async(r=0)=>{p(!0);const d=await ee(o,r);m(d),d.length>0&&y(R(d)[0]),p(!1)},A=()=>{let r=null;if(i.length-n.length==0)alert("FINISHED");else{for(N(!1),!f&&!c.includes(t.word)&&D([...c,t.word]);!r&&i.length-n.length>0;)R(i).forEach(d=>{n.includes(d.word)||(d.word!=(t==null?void 0:t.word)||i.length-n.length==1)&&(r=d)});y(r)}},P=()=>{n.includes(t==null?void 0:t.word)||(h([...n,t==null?void 0:t.word]),w(""),s(B({skipped:c.includes(t.word),word:t.word})))},F=async()=>{const r=(await L(async()=>{const{dictionaryHSK1:v}=await import("./dictionary_hsk1-z-Y0m1xN.js");return{dictionaryHSK1:v}},[])).dictionaryHSK1,d=(await L(async()=>{const{hsk1Primitives:v}=await import("./primitives_hsk1-BpeMAGKP.js");return{hsk1Primitives:v}},[])).hsk1Primitives;I({...r}),_({...d})},f=t!=null&&t.word?n.includes(t==null?void 0:t.word):!1;a.useEffect(()=>{b()},[]),a.useEffect(()=>{F()},[]);const M=a.useMemo(()=>(f||x)&&t?e.jsx("div",{className:"p-4 bg-neutral-700 shadow-md rounded-xl mb-2",children:e.jsx(Y,{currentCharacter:t.word,dictionary:H,definitionsMini:X,primitives:T})}):null,[f,x,t]);return e.jsx("div",{className:"container min-h-full flex flex-col mx-auto",children:u?e.jsxs("div",{className:"w-full min-h-full flex justify-center items-center flex-col",children:[e.jsx(J,{className:"text-8xl mb-2"}),e.jsx("p",{className:"font-bold text-xl",children:"SHUFFLING CHARACTERS"}),e.jsx("p",{className:"font-medium text-sm",children:"Please wait..."})]}):Object.keys(i).length==0||!t?e.jsxs("div",{className:"max-w-4/5 bg-neutral-700 p-5 rounded-md min-h-full mx-auto my-auto h-full flex justify-center items-center flex-col",children:[e.jsx(W,{className:"text-8xl mb-2"}),e.jsx("p",{className:"font-bold text-xl",children:"NO CHARACTER FOUND"}),e.jsxs("p",{className:"font-medium text-sm text-center mt-2",children:["There are currently ",Object.keys(o).length," characters slated for review in the future."]}),e.jsx("p",{className:"font-medium text-sm text-center mt-2",children:"Would you like to review them early?"}),e.jsx(j,{className:"my-6 mb-2 w-full",onClick:async()=>{b(10)},children:"EARLY REVIEW"})]}):e.jsxs("div",{className:"w-full md:w-1/2 mx-auto flex flex-col grow",children:[e.jsxs("div",{className:"text-xl mb-1",children:[n.length," / ",Object.keys(i).length]}),e.jsx("div",{className:"w-full h-4 bg-neutral-500 rounded-md overflow-clip mb-4",children:e.jsx("div",{style:{width:(n.length/Object.keys(i).length*100).toFixed(0)+"%"},className:"h-full bg-green-300"})}),e.jsx(q,{word:t==null?void 0:t.word}),e.jsx("div",{className:"mb-3"}),M,e.jsx("div",{className:"grow md:grow-0"}),e.jsx("div",{className:"sticky w-full p-3 bg-neutral-700 bottom-0 flex flex-row gap-2 rounded-xl lg:pb-8 "+(l?"opacity-50":"pointer-none"),style:{boxShadow:"0px 0px 10px rgba(0,0,0,0.5)"},children:n.length<i.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col flex-grow text-center w-1/3 "+(x?"opacity-75 pointer-none:":""),children:[e.jsx("p",{className:"font-bold text-xs whitespace-nowrap mb-2",children:"PINYIN"}),e.jsx($,{autoFocus:!0,autoCapitalize:"none",value:C,onChange:r=>{t!=null&&t.word&&Z(t.word,{toneless:!0})==r.target.value.toLowerCase()?(w(""),P()):w(r.target.value)},disabled:x})]}),e.jsxs("div",{className:"flex flex-col text-center",children:[e.jsx("p",{className:"font-bold text-xs whitespace-nowrap mb-2",children:x||f?"NEXT":"REVEAL"}),e.jsx(j,{className:"h-full flex flex-col justify-center items-center px-4",onClick:()=>{!f&&!x?N(!0):(f||w(""),A())},children:x||f?e.jsx(K,{size:"24"}):e.jsx(U,{size:"24"})})]})]}):e.jsxs("div",{className:"w-full flex flex-col text-center",children:[e.jsx("p",{className:"font-bold text-xs whitespace-nowrap mb-2",children:"HOME"}),e.jsx(j,{disabled:l,className:"w-full h-full flex flex-col justify-center items-center py-3",onClick:()=>{S("/")},children:e.jsx(Q,{size:"24"})})]})})]})})}export{ae as default};
