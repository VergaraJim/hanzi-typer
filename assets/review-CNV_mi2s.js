import{G as D,j as e,b as M,a as E,f as V,d as z,r as a,u as G,h as B,B as j,_ as L,i as W}from"./index-CHmRcttk.js";import{p as Z,a as U,d as g}from"./index-DJHTbq8M.js";import{b as Y}from"./index-B8QNZKfI.js";import{C as X}from"./character-description-ZFtsvSUd.js";function q(s){return D({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,104v96a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V104A16,16,0,0,1,48,88H208A16,16,0,0,1,224,104ZM56,72H200a8,8,0,0,0,0-16H56a8,8,0,0,0,0,16ZM72,40H184a8,8,0,0,0,0-16H72a8,8,0,0,0,0,16Z"},child:[]}]})(s)}function J(s){return D({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"},child:[]}]})(s)}function Q(s){let l={};return e.jsx("input",{...s,type:"text",style:l,onChange:s.onChange,className:"h-12 min-w-12 bg-stone-800 rounded-lg text-white font-medium px-3 focus:outline-stone-400 focus:outline-2 inset-shadow-md "+(s.className||""),value:s.value})}async function $(s,l=0){const o=[];let x=l;return Object.keys(s).sort(function(i,f){return new Date(s[i].reviewDate).getTime()-new Date(s[f].reviewDate).getTime()}).forEach(i=>{const f=s[i];if(new Date().getTime()>new Date(f.reviewDate).getTime()||x>0){x>0&&(x-=1);const n=[];let h="";Object.keys(g).forEach(c=>{c==i?h=g[c].definition:c.includes(i)&&n.push({word:c,definition:g[c].definition,level:g[c].category})}),o.push({word:i,definition:h,related:n})}}),o}function k(s){let l=[...s],o=l.length;for(;o!=0;){let x=Math.floor(Math.random()*o);o--,[l[o],l[x]]=[l[x],l[o]]}return l}function ie(){const s=M(),l=E(V),o=E(z),[x,p]=a.useState(!0),[i,f]=a.useState([]),[n,h]=a.useState([]),[c,R]=a.useState([]),[t,y]=a.useState(null),C=G(),[u,N]=a.useState(!1),[S,w]=a.useState(""),[I,H]=a.useState({}),[_,A]=a.useState({}),b=async(r=0)=>{p(!0);const d=await $(o,r);f(d),d.length>0&&y(k(d)[0]),p(!1)},T=()=>{let r=null;if(i.length-n.length==0)alert("FINISHED");else{for(N(!1),!m&&!c.includes(t.word)&&R([...c,t.word]);!r&&i.length-n.length>0;)k(i).forEach(d=>{n.includes(d.word)||(d.word!=(t==null?void 0:t.word)||i.length-n.length==1)&&(r=d)});y(r)}},F=()=>{n.includes(t==null?void 0:t.word)||(h([...n,t==null?void 0:t.word]),w(""),s(W({skipped:c.includes(t.word),word:t.word})))},O=async()=>{const r=(await L(async()=>{const{hsk1Dictionary:v}=await import("./dictionary_hsk1-Cxe3KjgF.js");return{hsk1Dictionary:v}},[])).hsk1Dictionary,d=(await L(async()=>{const{hsk1Primitives:v}=await import("./primitives_hsk1-BpeMAGKP.js");return{hsk1Primitives:v}},[])).hsk1Primitives;H({...r}),A({...d})},m=t!=null&&t.word?n.includes(t==null?void 0:t.word):!1;a.useEffect(()=>{b()},[]),a.useEffect(()=>{O()},[]);const P=a.useMemo(()=>(m||u)&&t?e.jsx("div",{className:"p-4 bg-stone-700 shadow-md rounded-xl mb-2",children:e.jsx(X,{currentCharacter:t.word,dictionary:I,primitives:_})}):null,[m,u,t]);return e.jsx("div",{className:"container min-h-full flex flex-col mx-auto",children:x?e.jsxs("div",{className:"w-full min-h-full flex justify-center items-center flex-col",children:[e.jsx(q,{className:"text-8xl mb-2"}),e.jsx("p",{className:"font-bold text-xl",children:"SHUFFLING CHARACTERS"}),e.jsx("p",{className:"font-medium text-sm",children:"Please wait..."})]}):Object.keys(i).length==0||!t?e.jsxs("div",{className:"max-w-4/5 bg-stone-700 p-5 rounded-md min-h-full mx-auto my-auto h-full flex justify-center items-center flex-col",children:[e.jsx(B,{className:"text-8xl mb-2"}),e.jsx("p",{className:"font-bold text-xl",children:"NO CHARACTER FOUND"}),e.jsxs("p",{className:"font-medium text-sm text-center mt-2",children:["There are currently ",Object.keys(o).length," characters slated for review in the future."]}),e.jsx("p",{className:"font-medium text-sm text-center mt-2",children:"Would you like to review them early?"}),e.jsx(j,{className:"my-6 mb-2 w-full",onClick:async()=>{b(10)},children:"EARLY REVIEW"})]}):e.jsxs("div",{className:"w-full md:w-1/2 mx-auto flex flex-col grow",children:[e.jsxs("div",{className:"text-xl mb-1",children:[n.length," / ",Object.keys(i).length]}),e.jsx("div",{className:"w-full h-4 bg-stone-500 rounded-md overflow-clip mb-4",children:e.jsx("div",{style:{width:(n.length/Object.keys(i).length*100).toFixed(0)+"%"},className:"h-full bg-green-300"})}),e.jsx("div",{className:"p-4 bg-stone-700 shadow-md rounded-xl mb-2",children:e.jsx("p",{className:"text-center text-7xl font-bold",children:t==null?void 0:t.word})}),P,e.jsx("div",{className:"grow md:grow-0"}),e.jsx("div",{className:"sticky w-full p-3 bg-stone-700 bottom-0 flex flex-row gap-2 rounded-xl lg:pb-8 "+(l?"opacity-50":"pointer-none"),style:{boxShadow:"0px 0px 10px rgba(0,0,0,0.5)"},children:n.length<i.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col flex-grow text-center w-1/3 "+(u?"opacity-75 pointer-none:":""),children:[e.jsx("p",{className:"font-bold text-xs whitespace-nowrap mb-2",children:"PINYIN"}),e.jsx(Q,{autoFocus:!0,autoCapitalize:"none",value:S,onChange:r=>{t!=null&&t.word&&Z(t.word,{style:0}).toString().replace(",","")==r.target.value.toLowerCase()?(w(""),F()):w(r.target.value)},disabled:u})]}),e.jsxs("div",{className:"flex flex-col text-center",children:[e.jsx("p",{className:"font-bold text-xs whitespace-nowrap mb-2",children:u||m?"NEXT":"REVEAL"}),e.jsx(j,{className:"h-full flex flex-col justify-center items-center px-4",onClick:()=>{!m&&!u?N(!0):(m||w(""),T())},children:u||m?e.jsx(U,{size:"24"}):e.jsx(Y,{size:"24"})})]})]}):e.jsxs("div",{className:"w-full flex flex-col text-center",children:[e.jsx("p",{className:"font-bold text-xs whitespace-nowrap mb-2",children:"HOME"}),e.jsx(j,{disabled:l,className:"w-full h-full flex flex-col justify-center items-center py-3",onClick:()=>{C("/")},children:e.jsx(J,{size:"24"})})]})})]})})}export{ie as default};
