import{b as D,r as l,_ as v,j as e,B as p,I as R,c as P,a as A,d as F,e as M}from"./index-CHmRcttk.js";import{I as T,d as S,p as B}from"./index-DJHTbq8M.js";import{a as U,F as V}from"./index-B8QNZKfI.js";import{C as G}from"./character-description-ZFtsvSUd.js";const H=10;function J(o){const r=D(),[u,j]=l.useState(!1),[c,f]=l.useState([]),[x,d]=l.useState([]),[a,b]=l.useState(null),[y,n]=l.useState(!1),[t,i]=l.useState([]),[g,L]=l.useState({}),[k,E]=l.useState({}),N=async()=>{const s=[...c],m=[...x,...Object.keys(o.learnedCharacters)],h=o.wordsList.filter(w=>!m.includes(w));for(;s.length<H&&h.length>0;){const w=h[Math.floor(Math.random()*h.length)];s.includes(w)||s.push(w)}localStorage.setItem("learningProgress["+o.category+"]",JSON.stringify(s)),f(s)},C=()=>{if(c.length>1){let s=null;for(;s==null||s==a;)s=c[Math.floor(Math.random()*c.length)];b(s),n(!1)}},_=()=>{if(t.length>0){const s=[...t];let m=!1;for(;!m&&s.length>0;){let h=s[s.length-1];s.pop(),c.includes(h)&&(i(s),b(h),n(!1),m=!0)}}},O=()=>{f(c.filter(s=>s!==a)),d([...x,a]),r(P({word:a}))};l.useEffect(()=>{switch(j(!1),o.category){case"HSK 3.0/Level 1":v(()=>import("./dictionary_hsk1-Cxe3KjgF.js"),[]).then(s=>{L(s.hsk1Dictionary),v(()=>import("./primitives_hsk1-BpeMAGKP.js"),[]).then(m=>{E(m.hsk1Primitives),j(!0)})})}},[o.category]),l.useEffect(()=>{if(u){const s=JSON.parse(localStorage.getItem("learningProgress["+o.category+"]")||"{}");Object.keys(s).length>0?f(s):N()}},[u]),l.useEffect(()=>{C()},[c]);const I=l.useMemo(()=>a&&a in g?e.jsx(G,{currentCharacter:a,dictionary:g,primitives:k}):null,[a]);return l.useEffect(()=>{N()},[x]),e.jsx("div",{className:"w-full h-full flex flex-col overflow-auto",children:u?c.length>0&&a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full bg-stone-700 p-3 rounded-md text-center text-7xl font-bold mb-3",children:a}),e.jsx("div",{className:"w-full bg-stone-700 p-3 rounded-md grow mb-3",children:y&&a in g?I:e.jsx("div",{className:"w-full h-full flex",onClick:()=>{n(!0)},children:e.jsx("p",{className:"m-auto font-medium text-xl",children:"CLICK TO REVEAL"})})}),e.jsxs("div",{className:"w-full flex flex-row gap-2 bg-stone-800 sticky bottom-0 py-3",children:[e.jsx(p,{className:"w-auto",basic:!0,disabled:t.length==0,onClick:_,children:e.jsx(T,{className:"text-xl"})}),e.jsxs(p,{className:"w-full",basic:!0,onClick:O,children:[e.jsx(U,{className:"mr-2 text-xl"})," LEARNED"]}),e.jsxs(p,{className:"w-full",onClick:()=>{i([...t,a]),C()},children:["NEXT ",e.jsx(R,{className:"ml-2 text-xl"})]})]})]}):e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:"LOADING..."})})}function Y(){const o=A(F),[r,u]=l.useState(null),[j,c]=l.useState(!1),[f,x]=l.useState(null),[d,a]=l.useState({});l.useEffect(()=>{const n={};Object.keys(S).forEach(t=>{const i=S[t].category;i in n?n[i].push(t):n[i]=[t]}),a(n)},[]);const b=l.useMemo(()=>{const n=[];return Object.keys(d).map(t=>{let i=0;d[t].forEach(g=>{Object.keys(o).includes(g)&&(i+=1)}),n.push(e.jsxs("button",{className:"p-3 rounded-md text-left shadow-md active:brightness-80 hover:cursor-pointer "+(t==r?"bg-stone-500":"bg-stone-700"),onClick:()=>{r==t?u(null):u(t),c(i==d[t].length)},children:[e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--primary)"},children:t}),e.jsxs("p",{children:["Characters:"," ",e.jsx("span",{style:{color:"var(--primary)"},children:i})," /"," ",d[t].length]})]},t))}),n},[r,d,o]),y=l.useMemo(()=>{const n=[];return r&&(d[r]||[]).map(t=>{n.push(e.jsxs("div",{className:"bg-stone-600 p-2 rounded-md flex justify-center gap-2 "+(Object.keys(o).includes(t)?"bg-stone-500":"opacity-50"),children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--primary)"},children:t}),e.jsxs("p",{className:"text-xl font-bold my-auto",children:["[",B(t),"]"]})]},"list_"+t))}),n},[r]);return e.jsx("div",{className:"container mx-auto h-full flex flex-col md:flex-row gap-2",children:f==null?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-auto w-full md:w-1/2 flex-col gap-2 h-full overflow-auto px-2 pb-2 "+(r?"hidden md:flex":"flex"),children:[e.jsx("p",{className:"text-3xl text-center font-bold bg-stone-800 md:sticky md:top-0",children:"CATEGORIES"}),b]}),r?e.jsxs("div",{className:"mx-auto w-full md:w-1/2 flex flex-col gap-2 h-full overflow-auto px-2",children:[e.jsx("p",{className:"text-3xl text-center font-bold bg-stone-800 md:sticky md:top-0 z-10",children:"WORDS"}),y,e.jsxs("div",{className:"flex flex-row gap-2 sticky bottom-0 bg-stone-800 py-2",children:[e.jsxs(p,{className:"grow-1 md:hidden",basic:!0,onClick:()=>{u(null)},children:[e.jsx(M,{className:"font-bold mr-2"}),"BACK"]}),e.jsxs(p,{className:"grow-1",onClick:()=>{x(r)},disabled:j,children:[e.jsx(V,{className:"font-bold mr-2"}),"STUDY"]})]})]}):null]}):e.jsx(J,{category:f,learnedCharacters:o,wordsList:d[f]})})}export{Y as default};
