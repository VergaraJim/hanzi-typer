import{b as P,r as s,_ as L,j as e,B as p,I as R,c as T,a as A,d as F,e as B}from"./index-gRQCLBHx.js";import{d as k}from"./functions-B78AmXaJ.js";import{a as H,F as W}from"./index-DdFUs7Hg.js";import{I as K,T as U}from"./word-container-DreFMgiV.js";import{C as V,d as G,W as J}from"./definitions_mini-BTmLv1NZ.js";const z=10;function X(n){const o=P(),[u,j]=s.useState(!1),[w,x]=s.useState(!1),[d,c]=s.useState([]),[g,b]=s.useState([]),[a,r]=s.useState(null),[l,i]=s.useState(!1),[f,N]=s.useState([]),[C,E]=s.useState({}),[_,O]=s.useState({}),v=async()=>{const t=[...d],m=[...g,...Object.keys(n.learnedCharacters)],h=n.wordsList.filter(y=>!m.includes(y));for(;t.length<z&&h.length>0;){const y=h[Math.floor(Math.random()*h.length)];t.includes(y)||t.push(y)}localStorage.setItem("learningProgress["+n.category+"]",JSON.stringify(t)),c(t)},S=()=>{if(d.length>1){let t=null;for(;t==null||t==a;)t=d[Math.floor(Math.random()*d.length)];r(t),i(!1)}},I=()=>{if(f.length>0){const t=[...f];let m=!1;for(;!m&&t.length>0;){let h=t[t.length-1];t.pop(),d.includes(h)&&(N(t),r(h),i(!1),m=!0)}}},D=()=>{c(d.filter(t=>t!==a)),b([...g,a]),o(T({word:a}))};s.useEffect(()=>{switch(j(!1),n.category){case"HSK 3.0/Level 1":L(()=>import("./dictionary_hsk1-z-Y0m1xN.js"),[]).then(t=>{E(t.dictionaryHSK1),L(()=>import("./primitives_hsk1-BpeMAGKP.js"),[]).then(m=>{O(m.hsk1Primitives),j(!0)})})}},[n.category]),s.useEffect(()=>{if(u){const t=JSON.parse(localStorage.getItem("learningProgress["+n.category+"]")||"{}");Object.keys(t).length>0?c(t):v()}x(!0)},[u]),s.useEffect(()=>{S()},[d]);const M=s.useMemo(()=>a&&a in C?e.jsx(V,{currentCharacter:a,dictionary:C,definitionsMini:G,primitives:_}):null,[a]);return s.useEffect(()=>{w&&v()},[g]),e.jsx("div",{className:"w-full h-full flex flex-col overflow-auto",children:u?d.length>0&&a?e.jsxs(e.Fragment,{children:[e.jsx(J,{word:a}),e.jsx("div",{className:"w-full bg-neutral-700 p-3 rounded-md grow mb-3 mt-3",children:l&&a in C?M:e.jsx("div",{className:"w-full h-full flex",onClick:()=>{i(!0)},children:e.jsx("p",{className:"m-auto font-medium text-xl",children:"CLICK TO REVEAL"})})}),e.jsxs("div",{className:"w-full flex flex-row gap-2 bg-neutral-800 sticky bottom-0 py-3",children:[e.jsx(p,{className:"w-auto",basic:!0,disabled:f.length==0,onClick:I,children:e.jsx(K,{className:"text-xl"})}),e.jsxs(p,{className:"w-full",basic:!0,onClick:D,children:[e.jsx(H,{className:"mr-2 text-xl"})," LEARNED"]}),e.jsxs(p,{className:"w-full",onClick:()=>{N([...f,a]),S()},children:["NEXT ",e.jsx(R,{className:"ml-2 text-xl"})]})]})]}):e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:"LOADING..."})})}function ee(){const n=A(F),[o,u]=s.useState(null),[j,w]=s.useState(!1),[x,d]=s.useState(null),[c,g]=s.useState({});s.useEffect(()=>{const r={};Object.keys(k).forEach(l=>{const i=k[l].category;i in r?r[i].push(l):r[i]=[l]}),g(r)},[]);const b=s.useMemo(()=>{const r=[];return Object.keys(c).map(l=>{let i=0;c[l].forEach(f=>{Object.keys(n).includes(f)&&(i+=1)}),r.push(e.jsxs("button",{className:"p-3 rounded-md text-left shadow-md active:brightness-80 hover:cursor-pointer "+(l==o?"bg-neutral-500":"bg-neutral-700"),onClick:()=>{o==l?u(null):u(l),w(i==c[l].length)},children:[e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--primary)"},children:l}),e.jsxs("p",{children:["Characters:"," ",e.jsx("span",{style:{color:"var(--primary)"},children:i})," /"," ",c[l].length]})]},l))}),r},[o,c,n]),a=s.useMemo(()=>{const r=[];return o&&(c[o]||[]).map(l=>{r.push(e.jsxs("div",{className:"bg-neutral-600 p-2 rounded-md flex justify-center gap-2 "+(Object.keys(n).includes(l)?"bg-neutral-500":"opacity-50"),children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--primary)"},children:l}),e.jsxs("p",{className:"text-xl font-bold my-auto",children:["[",U(l),"]"]})]},"list_"+l))}),r},[o]);return e.jsx("div",{className:"container mx-auto h-full flex flex-col md:flex-row gap-2",children:x==null?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-auto w-full md:w-1/2 flex-col gap-2 h-full overflow-auto px-2 pb-2 "+(o?"hidden md:flex":"flex"),children:[e.jsx("p",{className:"text-3xl text-center font-bold bg-neutral-800 md:sticky md:top-0",children:"CATEGORIES"}),b]}),o?e.jsxs("div",{className:"mx-auto w-full md:w-1/2 flex flex-col gap-2 h-full overflow-auto px-2",children:[e.jsx("p",{className:"text-3xl text-center font-bold bg-neutral-800 md:sticky md:top-0 z-10",children:"WORDS"}),a,e.jsxs("div",{className:"flex flex-row gap-2 sticky bottom-0 bg-neutral-800 py-2",children:[e.jsxs(p,{className:"grow-1 md:hidden",basic:!0,onClick:()=>{u(null)},children:[e.jsx(B,{className:"font-bold mr-2"}),"BACK"]}),e.jsxs(p,{className:"grow-1",onClick:()=>{d(o)},disabled:j,children:[e.jsx(W,{className:"font-bold mr-2"}),"STUDY"]})]})]}):null]}):e.jsx(X,{category:x,learnedCharacters:n,wordsList:c[x]})})}export{ee as default};
